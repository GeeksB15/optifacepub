import{I as Je,L as T,M as i,aW as je,aX as ee,aY as ye,P as et,F as tt,aZ as at,R as ke,a_ as R,a$ as ot,y as k,b0 as st,b1 as lt,E as it,b2 as rt,N as nt,S as ut,_ as Ce,o as z,j as P,p as V,a6 as I,q as w,b3 as te,a as u,Q as ct,c as U,w as f,D as y,b4 as dt,a4 as se,a5 as mt,h as vt,d as ht,f as ft,t as pt,ae as xe,l as X,r as ae,ab as gt,ad as bt,Z as yt,aT as kt,ac as Ct,a8 as xt,b5 as wt,b6 as oe,aV as H,a3 as pe,b7 as zt,aa as Ft}from"./index.691f0b8b.js";import{Q as _t}from"./QForm.a299d690.js";import{V as St,T as Q}from"./Visagismo.9a763939.js";import"./QTooltip.62535503.js";import"./QSpace.3cf29853.js";const ge="q-slider__marker-labels",qt=a=>({value:a}),Mt=({marker:a})=>k("div",{key:a.value,style:a.style,class:a.classes},a.label),we=[34,37,40,33,39,38],$t={...tt,...at,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:a=>a>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},At=["pan","update:modelValue","change"];function It({updateValue:a,updatePosition:e,getDragging:l,formAttrs:s}){const{props:t,emit:r,slots:c,proxy:{$q:d}}=ke(),x=Je(t,d),v=lt(s),g=T(!1),F=T(!1),_=T(!1),L=T(!1),C=i(()=>t.vertical===!0?"--v":"--h"),Y=i(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),q=i(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(d.lang.rtl===!0)),S=i(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),M=i(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),p=i(()=>t.disable!==!0&&t.readonly!==!0&&S.value<M.value),$=i(()=>{if(t.step===0)return n=>n;const o=(String(t.step).trim().split(".")[1]||"").length;return n=>parseFloat(n.toFixed(o))}),B=i(()=>t.step===0?1:t.step),ze=i(()=>p.value===!0?t.tabindex||0:-1),D=i(()=>t.max-t.min),le=i(()=>M.value-S.value),N=i(()=>W(S.value)),K=i(()=>W(M.value)),E=i(()=>t.vertical===!0?q.value===!0?"bottom":"top":q.value===!0?"right":"left"),ie=i(()=>t.vertical===!0?"height":"width"),Fe=i(()=>t.vertical===!0?"width":"height"),re=i(()=>t.vertical===!0?"vertical":"horizontal"),_e=i(()=>{const o={role:"slider","aria-valuemin":S.value,"aria-valuemax":M.value,"aria-orientation":re.value,"data-step":t.step};return t.disable===!0?o["aria-disabled"]="true":t.readonly===!0&&(o["aria-readonly"]="true"),o}),Se=i(()=>`q-slider q-slider${C.value} q-slider--${g.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+(p.value===!0?" q-slider--editable":""))+(_.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(x.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+C.value:""));function O(o){const n="q-slider__"+o;return`${n} ${n}${C.value} ${n}${C.value}${Y.value}`}function ne(o){const n="q-slider__"+o;return`${n} ${n}${C.value}`}const qe=i(()=>{const o=t.selectionColor||t.color;return"q-slider__selection absolute"+(o!==void 0?` text-${o}`:"")}),Me=i(()=>ne("markers")+" absolute overflow-hidden"),$e=i(()=>ne("track-container")),Ae=i(()=>O("pin")),Ie=i(()=>O("label")),Ve=i(()=>O("text-container")),Be=i(()=>O("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),Te=i(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),Le=i(()=>{const o={[Fe.value]:t.trackSize};return t.trackImg!==void 0&&(o.backgroundImage=`url(${t.trackImg}) !important`),o}),Qe=i(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),ue=i(()=>{const o=K.value-N.value,n={[E.value]:`${100*N.value}%`,[ie.value]:o===0?"2px":`${100*o}%`};return t.innerTrackImg!==void 0&&(n.backgroundImage=`url(${t.innerTrackImg}) !important`),n});function Re(o){const{min:n,max:m,step:h}=t;let b=n+o*(m-n);if(h>0){const A=(b-S.value)%h;b+=(Math.abs(A)>=h/2?(A<0?-1:1)*h:0)-A}return b=$.value(b),R(b,S.value,M.value)}function W(o){return D.value===0?0:(o-t.min)/D.value}function Pe(o,n){const m=ot(o),h=t.vertical===!0?R((m.top-n.top)/n.height,0,1):R((m.left-n.left)/n.width,0,1);return R(q.value===!0?1-h:h,N.value,K.value)}const ce=i(()=>je(t.markers)===!0?t.markers:B.value),de=i(()=>{const o=[],n=ce.value,m=t.max;let h=t.min;do o.push(h),h+=n;while(h<m);return o.push(m),o}),me=i(()=>{const o=` ${ge}${C.value}-`;return ge+`${o}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${o}${q.value===!0?"rtl":"ltr"}`}),Z=i(()=>t.markerLabels===!1?null:De(t.markerLabels).map((o,n)=>({index:n,value:o.value,label:o.label||o.value,classes:me.value+(o.classes!==void 0?" "+o.classes:""),style:{...he(o.value),...o.style||{}}}))),ve=i(()=>({markerList:Z.value,markerMap:Ne.value,classes:me.value,getStyle:he})),Ue=i(()=>{const o=le.value===0?"2px":100*ce.value/le.value;return{...ue.value,backgroundSize:t.vertical===!0?`2px ${o}%`:`${o}% 2px`}});function De(o){if(o===!1)return null;if(o===!0)return de.value.map(qt);if(typeof o=="function")return de.value.map(m=>{const h=o(m);return ee(h)===!0?{...h,value:m}:{value:m,label:h}});const n=({value:m})=>m>=t.min&&m<=t.max;return Array.isArray(o)===!0?o.map(m=>ee(m)===!0?m:{value:m}).filter(n):Object.keys(o).map(m=>{const h=o[m],b=Number(m);return ee(h)===!0?{...h,value:b}:{value:b,label:h}}).filter(n)}function he(o){return{[E.value]:`${100*(o-t.min)/D.value}%`}}const Ne=i(()=>{if(t.markerLabels===!1)return null;const o={};return Z.value.forEach(n=>{o[n.value]=n}),o});function Ee(){if(c["marker-label-group"]!==void 0)return c["marker-label-group"](ve.value);const o=c["marker-label"]||Mt;return Z.value.map(n=>o({marker:n,...ve.value}))}const Oe=i(()=>[[ye,He,void 0,{[re.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function He(o){o.isFinal===!0?(L.value!==void 0&&(e(o.evt),o.touch===!0&&a(!0),L.value=void 0,r("pan","end")),g.value=!1,_.value=!1):o.isFirst===!0?(L.value=l(o.evt),e(o.evt),a(),g.value=!0,r("pan","start")):(e(o.evt),a())}function fe(){_.value=!1}function Xe(o){e(o,l(o)),a(),F.value=!0,g.value=!0,document.addEventListener("mouseup",G,!0)}function G(){F.value=!1,g.value=!1,a(!0),fe(),document.removeEventListener("mouseup",G,!0)}function Ye(o){e(o,l(o)),a(!0)}function Ke(o){we.includes(o.keyCode)&&a(!0)}function We(o){if(t.vertical===!0)return null;const n=d.lang.rtl!==t.reverse?1-o:o;return{transform:`translateX(calc(${2*n-1} * ${t.thumbSize} / 2 + ${50-100*n}%))`}}function Ze(o){const n=i(()=>F.value===!1&&(_.value===o.focusValue||_.value==="both")?" q-slider--focus":""),m=i(()=>`q-slider__thumb q-slider__thumb${C.value} q-slider__thumb${C.value}-${q.value===!0?"rtl":"ltr"} absolute non-selectable`+n.value+(o.thumbColor.value!==void 0?` text-${o.thumbColor.value}`:"")),h=i(()=>({width:t.thumbSize,height:t.thumbSize,[E.value]:`${100*o.ratio.value}%`,zIndex:_.value===o.focusValue?2:void 0})),b=i(()=>o.labelColor.value!==void 0?` text-${o.labelColor.value}`:""),A=i(()=>We(o.ratio.value)),J=i(()=>"q-slider__text"+(o.labelTextColor.value!==void 0?` text-${o.labelTextColor.value}`:""));return()=>{const j=[k("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[k("path",{d:t.thumbPath})]),k("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(j.push(k("div",{class:Ae.value+" absolute fit no-pointer-events"+b.value},[k("div",{class:Ie.value,style:{minWidth:t.thumbSize}},[k("div",{class:Ve.value,style:A.value},[k("span",{class:J.value},o.label.value)])])])),t.name!==void 0&&t.disable!==!0&&v(j,"push")),k("div",{class:m.value,style:h.value,...o.getNodeData()},j)}}function Ge(o,n,m,h){const b=[];t.innerTrackColor!=="transparent"&&b.push(k("div",{key:"inner",class:Qe.value,style:ue.value})),t.selectionColor!=="transparent"&&b.push(k("div",{key:"selection",class:qe.value,style:o.value})),t.markers!==!1&&b.push(k("div",{key:"marker",class:Me.value,style:Ue.value})),h(b);const A=[st("div",{key:"trackC",class:$e.value,tabindex:n.value,...m.value},[k("div",{class:Te.value,style:Le.value},b)],"slide",p.value,()=>Oe.value)];if(t.markerLabels!==!1){const J=t.switchMarkerLabelsSide===!0?"unshift":"push";A[J](k("div",{key:"markerL",class:Be.value},Ee()))}return A}return et(()=>{document.removeEventListener("mouseup",G,!0)}),{state:{active:g,focus:_,preventFocus:F,dragging:L,editable:p,classes:Se,tabindex:ze,attributes:_e,roundValueFn:$,keyStep:B,trackLen:D,innerMin:S,innerMinRatio:N,innerMax:M,innerMaxRatio:K,positionProp:E,sizeProp:ie,isReversed:q},methods:{onActivate:Xe,onMobileClick:Ye,onBlur:fe,onKeyup:Ke,getContent:Ge,getThumbRenderFn:Ze,convertRatioToModel:Re,convertModelToRatio:W,getDraggingRatio:Pe}}}const Vt=()=>({});var be=it({name:"QSlider",props:{...$t,modelValue:{required:!0,default:null,validator:a=>typeof a=="number"||a===null},labelValue:[String,Number]},emits:At,setup(a,{emit:e}){const{proxy:{$q:l}}=ke(),{state:s,methods:t}=It({updateValue:C,updatePosition:q,getDragging:Y,formAttrs:rt(a)}),r=T(null),c=T(0),d=T(0);function x(){d.value=a.modelValue===null?s.innerMin.value:R(a.modelValue,s.innerMin.value,s.innerMax.value)}nt(()=>`${a.modelValue}|${s.innerMin.value}|${s.innerMax.value}`,x),x();const v=i(()=>t.convertModelToRatio(d.value)),g=i(()=>s.active.value===!0?c.value:v.value),F=i(()=>{const p={[s.positionProp.value]:`${100*s.innerMinRatio.value}%`,[s.sizeProp.value]:`${100*(g.value-s.innerMinRatio.value)}%`};return a.selectionImg!==void 0&&(p.backgroundImage=`url(${a.selectionImg}) !important`),p}),_=t.getThumbRenderFn({focusValue:!0,getNodeData:Vt,ratio:g,label:i(()=>a.labelValue!==void 0?a.labelValue:d.value),thumbColor:i(()=>a.thumbColor||a.color),labelColor:i(()=>a.labelColor),labelTextColor:i(()=>a.labelTextColor)}),L=i(()=>s.editable.value!==!0?{}:l.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:S,onBlur:t.onBlur,onKeydown:M,onKeyup:t.onKeyup});function C(p){d.value!==a.modelValue&&e("update:modelValue",d.value),p===!0&&e("change",d.value)}function Y(){return r.value.getBoundingClientRect()}function q(p,$=s.dragging.value){const B=t.getDraggingRatio(p,$);d.value=t.convertRatioToModel(B),c.value=a.snap!==!0||a.step===0?B:t.convertModelToRatio(d.value)}function S(){s.focus.value=!0}function M(p){if(!we.includes(p.keyCode))return;ut(p);const $=([34,33].includes(p.keyCode)?10:1)*s.keyStep.value,B=([34,37,40].includes(p.keyCode)?-1:1)*(s.isReversed.value===!0?-1:1)*(a.vertical===!0?-1:1)*$;d.value=R(s.roundValueFn.value(d.value+B),s.innerMin.value,s.innerMax.value),C()}return()=>{const p=t.getContent(F,s.tabindex,L,$=>{$.push(_())});return k("div",{ref:r,class:s.classes.value+(a.modelValue===null?" q-slider--no-value":""),...s.attributes.value,"aria-valuenow":a.modelValue},p)}}});const Bt={computed:{sensorHorizontalCor(){return this.sensor.horizontal<-10||this.sensor.horizontal>10?"red":"green"},sensorVerticalCor(){return this.sensor.vertical<85||this.sensor.vertical>95?"red":"green"}},data(){return{visivel:!1,footer:!1,sensor:{visivel:!1,horizontal:0,vertical:90},zoom:1,camera:"environment",flashicon:"flash_off",orientation:{},capabilities:{},cameras:[],selectedCamera:null}},methods:{zoomPlus(){try{this.zoom+=this.capabilities.zoom.step,this.zoom>this.capabilities.zoom.max&&(this.zoom=this.capabilities.zoom.max),this.track.applyConstraints({advanced:[{zoom:this.zoom}]})}catch(a){console.log("erro zoom + ",a)}},zoomLess(){try{this.zoom-=this.capabilities.zoom.step,this.zoom<this.capabilities.zoom.min&&(this.zoom=this.capabilities.zoom.min),this.track.applyConstraints({advanced:[{zoom:this.zoom}]})}catch(a){console.log("erro zoom + ",a)}},uploadClick(){this.$refs.upload.click()},openImage(){const a=this.$refs.upload.files;if(FileReader&&a&&a.length){var e=new FileReader;e.onload=()=>{this.resolve({acao:"foto",foto:e.result}),this.hide()},e.readAsDataURL(a[0])}},async photo(){const a=this;a.flashicon==="flash_auto"&&(a.track.applyConstraints({advanced:[{torch:!0}]}),await new Promise(e=>setTimeout(e,1e3))),a.imageCapture.takePhoto().then(async e=>{const l=document.createElement("canvas"),s=l.getContext("2d"),t=new Image;t.onload=()=>{l.width=t.naturalWidth,l.height=t.naturalHeight,s.drawImage(t,0,0,t.naturalWidth,t.naturalHeight),this.resolve({acao:"foto",foto:l.toDataURL()+""}),this.hide(),a.flashicon==="flash_auto"&&a.track.applyConstraints({advanced:[{torch:!1}]})},t.src=URL.createObjectURL(e),await this.hide()}).catch(e=>console.error("takePhoto() failed: ",e))},flash(){switch(this.flashicon){case"flash_on":this.flashicon="flash_off",this.track.applyConstraints({advanced:[{torch:!1}]});break;case"flash_off":this.flashicon="flash_auto",this.track.applyConstraints({advanced:[{torch:!1}]});break;case"flash_auto":this.flashicon="flash_on",this.track.applyConstraints({advanced:[{torch:!0}]})}},async changeCamera(){function a(s=0){return new Promise(t=>setTimeout(t,s))}let e={};this.selectedCamera&&(e={audio:!1,video:{deviceId:{exact:this.selectedCamera},zoom:{ideal:1}}}),this.selectedCamera||(this.camera==="user"?this.camera="environment":this.camera="user",e={audio:!1,video:{facingMode:this.camera,zoom:{ideal:1}}});let l=document.getElementById("photo");l||await new Promise(s=>{this.interval=setInterval(()=>{l=document.getElementById("photo"),l&&(clearInterval(this.interval),s())},10)}),l.setAttribute("playsinline",""),l.setAttribute("autoplay",""),l.setAttribute("muted","");try{l.srcObject.getTracks().forEach(s=>s.stop())}catch{}navigator.mediaDevices.getUserMedia(e).then(async s=>{l.srcObject=s,await a(1e3),this.track=s.getVideoTracks()[0],this.capabilities=this.track.getCapabilities();const t=this.track.getSettings();this.zoom=t.zoom,this.imageCapture=new ImageCapture(this.track)})},availableCameras(){navigator.mediaDevices.enumerateDevices().then(a=>{this.cameras=a.filter(e=>e.kind==="videoinput").map(e=>({label:e.label||`C\xE2mera ${this.cameras.length+1}`,deviceId:e.deviceId}))}).catch(a=>{console.error("Erro ao obter as c\xE2meras:",a)})},chooseCamera(a){this.selectedCamera=a,this.changeCamera()},async sensorPosition(){await this.$nextTick();try{window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",a=>{var t,r,c,d,x,v,g,F;let e=0,l=0;window.orientation===90&&(l=parseInt(a.gamma),l=l<0?l*-1:180-Math.abs(l),l<91?e=parseInt(a.beta)*-1:(e=parseInt(a.beta)*-1,e=e>0?180-e:Math.abs(e)-180)),window.orientation===-90&&(e=parseInt(a.beta)*-1,l=parseInt(a.gamma),l=l<0?180+l:l,l<91?e=e===180?0:e:e=e>0?180-e:Math.abs(e)-180),window.orientation===0&&(l=parseInt(a.beta),l<91?e=parseInt(a.gamma)*-1:e=parseInt(a.gamma)),e>90&&(e=90),e<-90&&(e=-90),this.sensor.horizontal!==e&&(this.sensor.horizontal=e);let s=this.sensor.horizontal<-10||this.sensor.horizontal>10?"red":"green";s==="red"&&(r=(t=document.querySelector(".sensorHorizontal .q-slider__thumb"))==null?void 0:t.style)!=null&&r.visibility&&(document.querySelector(".sensorHorizontal .q-slider__thumb").style.visibility="visible"),s==="green"&&(d=(c=document.querySelector(".sensorHorizontal .q-slider__thumb"))==null?void 0:c.style)!=null&&d.visibility&&(document.querySelector(".sensorHorizontal .q-slider__thumb").style.visibility="hidden"),l>180&&(l=180),l<63&&(l=63),this.sensor.vertical!==l&&(this.sensor.vertical=l),s=this.sensor.vertical<85||this.sensor.vertical>95?"red":"green",s==="red"&&(v=(x=document.querySelector(".sensorVertical .q-slider__thumb"))==null?void 0:x.style)!=null&&v.visibility&&(document.querySelector(".sensorVertical .q-slider__thumb").style.visibility="visible"),s==="green"&&(F=(g=document.querySelector(".sensorVertical .q-slider__thumb"))==null?void 0:g.style)!=null&&F.visibility&&(document.querySelector(".sensorVertical .q-slider__thumb").style.visibility="hidden")},!1)}catch(a){console.log("Erro: ",a)}},async show(a){return a!=null&&a.sensor&&(this.sensor.visivel=a==null?void 0:a.sensor),this.availableCameras(),this.changeCamera(),this.visivel=!0,new Promise((e,l)=>{this.resolve=e})},async hide(){this.visivel=!1,await $utils.dormir(2e3),this.track&&this.track.stop()},footerShow(a){this.footer=a}},async mounted(){$g.promptCamera={show:this.show}},beforeUnmount(){try{this.track.stop(),clearInterval(this.interval)}catch{}}},Tt={class:"container"},Lt={class:"baseLeftBtns"},Qt={class:"baseRightBtns"};function Rt(a,e,l,s,t,r){return z(),P(se,null,[V("div",Tt,[V("video",{onContextmenu:e[0]||(e[0]=I(()=>{},["prevent"])),id:"photo",class:"video"},null,32),w(u(be,{modelValue:t.sensor.horizontal,"onUpdate:modelValue":e[1]||(e[1]=c=>t.sensor.horizontal=c),color:r.sensorHorizontalCor,min:-90,max:90,ref:"horizontal",class:"sensorHorizontal"},null,8,["modelValue","color"]),[[te,t.sensor.visivel]]),w(u(ct,{color:r.sensorHorizontalCor,name:"remove_red_eye",class:"removeRedEye"},null,8,["color"]),[[te,t.sensor.visivel]]),w(u(be,{modelValue:t.sensor.vertical,"onUpdate:modelValue":e[2]||(e[2]=c=>t.sensor.vertical=c),color:r.sensorVerticalCor,min:63,max:180,ref:"vertical",class:"sensorVertical"},null,8,["modelValue","color"]),[[te,t.sensor.visivel]])]),t.footer?(z(),U(xe,{key:0},{default:f(()=>[V("div",Lt,[u(y,{onClick:e[3]||(e[3]=c=>r.uploadClick()),icon:"attachment",color:"primary",size:"md",round:"",class:"btUpload"}),u(y,{onClick:e[4]||(e[4]=c=>r.zoomPlus()),icon:"zoom_in",color:"primary",size:"md",round:"",class:"zoomPlus"}),u(y,{onClick:e[5]||(e[5]=c=>r.zoomLess()),icon:"zoom_out",color:"primary",size:"md",round:"",class:"zoomLess"})]),u(y,{onClick:e[6]||(e[6]=c=>r.photo()),icon:"camera",color:"primary",size:"xl",round:"",class:"btPhoto"}),V("div",Qt,[u(y,{icon:"loop",color:"primary",size:"md",round:"",class:"btChangeCamera"},{default:f(()=>[u(dt,{anchor:"top left",self:"bottom middle"},{default:f(()=>[(z(!0),P(se,null,mt(t.cameras,(c,d)=>(z(),U(vt,{onClick:x=>r.chooseCamera(c.deviceId),key:d,clickable:""},{default:f(()=>[u(ht,null,{default:f(()=>[ft(pt(c.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),u(y,{onClick:e[7]||(e[7]=c=>r.flash()),icon:t.flashicon,color:"primary",size:"md",round:"",class:"btFlash"},null,8,["icon"])])]),_:1})):X("",!0),V("input",{onChange:e[8]||(e[8]=c=>r.openImage()),class:"upload",ref:"upload",type:"file"},null,544)],64)}var Pt=Ce(Bt,[["render",Rt],["__scopeId","data-v-7424fe40"]]);const Ut={components:{Camera:Pt,Visagismo:St},data(){return{tela:0,footer:!0,dados:{visivel:!1,foto:"",fotoOriginal:"",nome:"",telefone:"",opcao:""},tab:"nome",tabs:["nome","telefone","opcao"],fotoFator:1,imagemBranco:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC",zoom:1,qtde:0,pinca:{zoom:0,scaling:!1,width:0,height:0,top:0,left:0},distancia:{x1i:0,y1i:0,x2i:0,y2i:0,x1f:0,y1f:0,x2f:0,y2f:0,distanciaInicial:0,distanciaFinal:0}}},methods:{async dialogAbrir(){this.tab="nome",this.dados.foto="",this.dados.fotoOriginal="",this.dados.visivel=!0,await this.$nextTick(),await this.imagemCameraInput()},dialogAvancar(){var e,l;const a=this.tabs.indexOf(this.tab);if(a<this.tabs.length-1){const s=this.tabs[a+1];s==="telefone"&&!!((e=this.dados)!=null&&e.nome)?this.tab=s:s==="telefone"&&$q.notify("Preencha o nome para continuar."),s==="opcao"&&!!((l=this.dados)!=null&&l.telefone)?this.tab=s:s==="opcao"&&$q.notify("Preencha o telefone para continuar.")}},async dialogVerificar(a){this.dados.opcao=a,this.dados.nome&&this.dados.telefone&&this.dados.opcao&&(this.dados.visivel=!1,this.footer=!1,await this.$nextTick(),await this.$refs.camera.footerShow(!0))},touch(a){const e=this.$refs.foto;let l=0;try{l=a.evt.touches.length}catch{}if(this.qtde=l,this.pinca.scaling||l!==2&&Math.abs(a.delta.x+a.delta.y)<=20&&(e.style.left=parseFloat(e.style.left)+a.delta.x+"px",e.style.top=parseFloat(e.style.top)+a.delta.y+"px"),!this.pinca.scaling&&l===2){const s=this.distancia;s.x1i=a.evt.touches[0].pageX,s.y1i=a.evt.touches[0].pageY,s.x2i=a.evt.touches[1].pageX,s.y2i=a.evt.touches[1].pageY,s.distanciaInicial=Math.hypot(a.evt.touches[0].pageX-a.evt.touches[1].pageX,a.evt.touches[0].pageY-a.evt.touches[1].pageY),this.pinca.width=parseFloat(e.style.width),this.pinca.height=parseFloat(e.style.height),this.pinca.top=parseFloat(e.style.top),this.pinca.left=parseFloat(e.style.left),this.pinca.zoom=Math.hypot(a.evt.touches[0].pageX-a.evt.touches[1].pageX,a.evt.touches[0].pageY-a.evt.touches[1].pageY),this.pinca.scaling=!0}if(this.pinca.scaling&&l===0&&setTimeout(()=>{this.pinca.scaling=!1},300),this.pinca.scaling&&l===2)try{const s=a.evt,t=Math.hypot(s.touches[0].pageX-s.touches[1].pageX,s.touches[0].pageY-s.touches[1].pageY)-this.pinca.zoom,r=this.$refs.foto;r.style.width=this.pinca.width+t+"px",r.style.height=this.pinca.height+t*this.fotoFator+"px",r.style.top=this.pinca.top-t/2*this.fotoFator+"px",r.style.left=this.pinca.left-t/2+"px"}catch(s){console.log(s)}},zoomMais(){const a=this.$refs.foto;a.style.width=parseFloat(a.style.width)+2+"px",a.style.height=parseFloat(a.style.height)+2*this.fotoFator+"px",a.style.top=parseFloat(a.style.top)-1*this.fotoFator+"px",a.style.left=parseFloat(a.style.left)-1+"px"},zoomMenos(){const a=this.$refs.foto;a.style.width=parseFloat(a.style.width)-2+"px",a.style.height=parseFloat(a.style.height)-2*this.fotoFator+"px",a.style.top=parseFloat(a.style.top)+1*this.fotoFator+"px",a.style.left=parseFloat(a.style.left)+1+"px"},moveUp(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)-1+"px"},moveDown(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)+1+"px"},moveRight(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)+1+"px"},moveLeft(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)-1+"px"},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")},btProximo(){this.dados.foto!==this.imagemBranco?this.$emit("mudarTela","TamanhoFoto"):$q.notifyAlert("Para prosseguir \xE9 necessario tirar uma foto")},excluirFoto(){$q.dialog({title:"Deseja continuar?",message:"Ao continuar voc\xEA ir\xE1 remover a imagem.",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{$q.loading.show(),this.dados.fotoOriginal=this.imagemBranco,this.dados.foto=this.imagemBranco,$q.loading.hide()})},async imagemCameraInput(){const a=await this.$refs.camera.show({sensor:!1});if(await this.$nextTick(),await this.$refs.camera.footerShow(!0),a.acao==="foto"){if(this.dados.foto=a.foto,this.dados.fotoOriginal=a.foto,this.footer=!0,await this.$nextTick(),this.redimensiona(),this.dados.opcao==="Visagismo"){delete this.dados.fotoOriginal;const e=JSON.stringify(this.dados);localStorage.setItem("DadosTelaFoto",e)}if(this.dados.opcao==="Pupil\xF4metro"){const e=JSON.stringify(this.dados);localStorage.setItem("DadosTelaFoto",e)}}},uploadClick(){this.$emit("mudarTela","TamanhoFoto"),this.$emit("upload")},redimensiona(){const a=this.$refs.foto,e=new Image,l=this;e.onload=()=>{const s=document.body.clientWidth-20,t=window.innerHeight-100-20;let r=e.width,c=e.height,d=1.001;e.width/s>e.height/t?d=s/e.width:d=t/e.height,r=parseInt(r*d),c=parseInt(c*d),a.style.top=(t-c)/2+10+"px",a.style.left=(s-r)/2+10+"px",a.style.width=r+"px",a.style.height=c+"px",l.fotoFator=e.height/e.width},e.src=this.dados.foto},async obterImagemCameraInput(){return new Promise(a=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.setAttribute("capture","environment"),e.addEventListener("cancel",l=>{a(null)}),e.addEventListener("change",()=>{const l=e.files;if(FileReader&&l&&l.length){const s=new FileReader;s.onload=async()=>{a(s.result)},s.readAsDataURL(l[0])}}),e.click()})},resize(){this.tela=$utils.tela("FotoHeader").height}},async mounted(){await this.imagemCameraInput(),this.dados.foto=this.dados.fotoOriginal,this.redimensiona()}},Dt={id:"Foto"},Nt={key:0,class:"img-container"},Et=["src"],Ot={class:"ZonaTouch"};function Ht(a,e,l,s,t,r){const c=ae("toolbarMain"),d=ae("Camera"),x=ae("Visagismo");return z(),P("div",Dt,[u(gt,{id:"FotoHeader"},{default:f(()=>[u(c)]),_:1}),u(Ct,{class:"no-padding"},{default:f(()=>[u(bt,{style:yt(`min-height:calc(100vh - ${t.tela}px);`)},{default:f(()=>{var v,g;return[u(kt,{onResize:e[0]||(e[0]=()=>{r.resize(),r.redimensiona()})}),(v=t.dados)!=null&&v.foto?(z(),P("div",Nt,[V("img",{onContextmenu:e[1]||(e[1]=I(()=>{},["prevent"])),src:(g=t.dados)==null?void 0:g.foto,ref:"foto",class:"Foto"},null,40,Et)])):(z(),U(d,{key:1,ref:"camera"},null,512))]}),_:1},8,["style"])]),_:1}),t.footer?(z(),U(xe,{key:0,class:"bg-transparent q-pa-xl"},{default:f(()=>{var v;return[u(y,{onClick:e[2]||(e[2]=g=>r.dialogAbrir()),unelevated:"",label:"come\xE7ar",color:"primary",class:"btComecar"}),(v=t.dados)!=null&&v.foto?(z(),P(se,{key:0},[w(u(y,{onContextmenu:e[3]||(e[3]=I(()=>{},["prevent"])),color:"primary",size:"md",round:"",icon:"zoom_in",class:"ZoomMais"},null,512),[[Q,r.zoomMais,"0:20",{mouse:!0,enter:!0,space:!0}]]),w(u(y,{onContextmenu:e[4]||(e[4]=I(()=>{},["prevent"])),color:"primary",size:"md",round:"",icon:"zoom_out",class:"ZoomMenos"},null,512),[[Q,r.zoomMenos,"0:20",{mouse:!0,enter:!0,space:!0}]]),w(V("div",Ot,null,512),[[ye,r.touch,void 0,{prevent:!0,mouse:!0}]]),e[17]||(e[17]=V("div",{class:"BaseBotoes"},null,-1)),w(u(y,{onContextmenu:e[5]||(e[5]=I(()=>{},["prevent"])),round:"",icon:"keyboard_arrow_up",size:"md",color:"primary",class:"moveUp"},null,512),[[Q,r.moveUp,"0:50",{mouse:!0,enter:!0,space:!0}]]),w(u(y,{onContextmenu:e[6]||(e[6]=I(()=>{},["prevent"])),round:"",icon:"keyboard_arrow_down",size:"md",color:"primary",class:"moveDown"},null,512),[[Q,r.moveDown,"0:50",{mouse:!0,enter:!0,space:!0}]]),w(u(y,{onContextmenu:e[7]||(e[7]=I(()=>{},["prevent"])),round:"",icon:"keyboard_arrow_right",size:"md",color:"primary",class:"moveRight"},null,512),[[Q,r.moveRight,"0:50",{mouse:!0,enter:!0,space:!0}]]),w(u(y,{onContextmenu:e[8]||(e[8]=I(()=>{},["prevent"])),round:"",icon:"keyboard_arrow_left",size:"md",color:"primary",class:"moveLeft"},null,512),[[Q,r.moveLeft,"0:50",{mouse:!0,enter:!0,space:!0}]])],64)):X("",!0)]}),_:1})):X("",!0),u(Ft,{modelValue:t.dados.visivel,"onUpdate:modelValue":e[16]||(e[16]=v=>t.dados.visivel=v),persistent:""},{default:f(()=>[u(xt,{class:"no-shadow q-py-xl q-px-lg",style:{width:"320px"}},{default:f(()=>[u(_t,{onSubmit:e[15]||(e[15]=v=>r.dialogAvancar()),novalidate:"",autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},{default:f(()=>[u(wt,{modelValue:t.tab,"onUpdate:modelValue":e[13]||(e[13]=v=>t.tab=v),animated:""},{default:f(()=>[u(oe,{name:"nome",class:"q-pa-none"},{default:f(()=>[u(H,{class:"q-pa-none q-mb-lg"},{default:f(()=>[u(pe,{modelValue:t.dados.nome,"onUpdate:modelValue":e[9]||(e[9]=v=>t.dados.nome=v),autofocus:"",type:"text",label:"Nome",dense:""},null,8,["modelValue"])]),_:1})]),_:1}),u(oe,{name:"telefone",class:"q-pa-none"},{default:f(()=>[u(H,{class:"q-pa-none q-mb-lg"},{default:f(()=>[u(pe,{modelValue:t.dados.telefone,"onUpdate:modelValue":e[10]||(e[10]=v=>t.dados.telefone=v),autofocus:"",dense:"",type:"tel",label:"Telefone",mask:"###########"},null,8,["modelValue"])]),_:1})]),_:1}),u(oe,{name:"opcao",class:"q-pa-none"},{default:f(()=>[u(H,{class:"q-pa-none q-mb-lg text-center"},{default:f(()=>[u(y,{onClick:e[11]||(e[11]=v=>r.dialogVerificar("Pupil\xF4metro")),label:"Pupil\xF4metro",color:"primary"})]),_:1}),u(H,{class:"q-pa-none text-center"},{default:f(()=>[u(y,{onClick:e[12]||(e[12]=v=>r.dialogVerificar("Visagismo")),label:"Visagismo",color:"primary"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t.tab!=="opcao"?(z(),U(zt,{key:0,class:"q-pa-none"},{default:f(()=>[u(y,{onClick:e[14]||(e[14]=v=>r.dialogAvancar()),icon:"arrow_forward",round:"",unelevated:"",color:"primary",class:"q-mx-auto"})]),_:1})):X("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),u(x,{ref:"visagismo"},null,512)])}var Gt=Ce(Ut,[["render",Ht],["__scopeId","data-v-badacc16"]]);export{Gt as default};
